<!DOCTYPE html>
<html lang="zh-CN">

	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<!-- 上述3个meta标签*必须*放在最前面，任何其他内容都*必须*跟随其后！ -->
		<title>签到网站后台管理</title>

		<!-- Bootstrap -->
		<link href="css/bootstrap.min.css" rel="stylesheet">

		<!--自己定义的css文件-->
		<link href="css/mycss.css" rel="stylesheet" />
		<link href="css/pagination.css" rel="stylesheet" />

		<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
		<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
		<!--[if lt IE 9]>
      <script src="https://cdn.bootcss.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://cdn.bootcss.com/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
	</head>


	<link href="css/mycss.css" rel="stylesheet" />


	<style>
		#modal_input,#modalActivity_input{
			float: left;
		}
		#reason_input{
			margin-top: -20px;
			margin-left: 60px;
			width: 200px;
			height: 280px;
			overflow-y: scroll;
		}
		#reasonActivity_input{
			margin-top: -20px;
			margin-left: 60px;
			width: 200px;
			height: 180px;
			overflow-y: scroll;
		}
		#reason_input_tip,#reasonActivity_input_tip{
			top: 50px;
		 }
		#person_input,#personActivity_input,#tip_input,#Activity_address,
		#Activity_tip_input,#ActivityStartTime,#ActivityEndTime{
			width: 200px;
		}
		#my_addtable,#my_addtable2,#my_addtable_department{
			display: block;
			width: 35%;
			overflow-y: scroll;
			height: 270px;
			float: right;
		}
        #tableAct{
            display: block;
            width: 35%;
            overflow-y: scroll;
            height: 270px;
            float: right;
        }
		#notifySelectNotifyPerson,#activitySelectNotifyPerson{
			margin-right: 30px;
			float: right;
		}
		#my_add_releaseNotify{
			float: right;
			width: 30%;
		}
		.my_searchname{
			float: right;
		}
	</style>
	<script>
		var companyRepresentativeId="";
		var companyId="";
		var privilege="";
		function getCookie1() {
			var strCookie = document.cookie;
			var arrCookie = strCookie.split(";");
			for (var i = 0; i < arrCookie.length; i++) {
				var arr = arrCookie[i].split("=");
				arr[0] = $.trim(arr[0]);
				if ("companyRepresentativeId" == arr[0]) {
					companyRepresentativeId= arr[1];

				}
				if ("privilege" == arr[0]) {

					privilege= arr[1];
				}
				if ("companyId" == arr[0]) {

					companyId= arr[1];
				}
			}
		}
		function setCookie() {
			var now = new Date();
			now.setTime(now.getTime() + 5 * 60 * 1000);
			document.cookie = "privilege=1;expires=" + now.toGMTString();
			document.cookie = "companyRepresentativeId=201704241323231;expires=" + now.toGMTString();
			document.cookie = "companyId=12;expires=" + now.toGMTString();
		}

		function judge() {
			getCookie1();
			if (companyRepresentativeId== null || privilege == null || companyRepresentativeId==""
					|| privilege == ""||companyId==null||companyId=="") {

				window.open("index.html", "_self");
			} else {
				getDepartments();
				queryActivities();
				queryNotifies();
			}
		}
		function getDepartments() {

			$
					.ajax({
						type : 'post',
						url : "CompanyAdmin/getDepartments",
						data: 'companyid='+companyId,
						success : function(data) {
							$(function() {

								var length = data.length;
								$("#Pagination1").pagination(length, {
									items_per_page : 10,
									callback : pageselectCallback
								});

								function pageselectCallback(page_index, jq) {
									var items_per_page = 10;
									var max_elem = Math.min((page_index + 1)
											* items_per_page, length);

									$("#departments").html("");//html() 方法返回或设置被选元素的内容 (inner HTML)。
									for (var i = page_index * items_per_page; i < max_elem; i++) {
										var s=i+1;
										$("#departments")
												.append(
												'<tr><td><input type="checkbox" class="'+data[i].departmentid+'" id="my_departmentlist_checkbox_'+s+'"/></td><td><a onclick=showDepartmentAdmin("'+data[i].departmentid+'","'+data[i].name+'")>'
												+ data[i].name
												+ '</a></td><td>'
												+ data[i].address
												+ '</td><td>'
												+ data[i].mac
												+ '</td></tr>');

									}
									return false;
								}
							});
						},
						error : function() {
							return;
						}
					});
		}
		function getAndDeleteDepartment()
		{
			var departmentids=new Array();
			$("#departments input:checked").each(function(i,element)
			{
				departmentids[i]=$(element).attr("class");
			});
			deleteDepartment(departmentids);
		}
		function deleteDepartment(departmentids)
		{
			$
					.ajax({
						type : 'post',
						url : "CompanyAdmin/deleteDepartments",
						data: 'departmentids='+departmentids,
						success : function(data) {
							if(data=="")
								alert("删除失败");
							else
								alert("删除成功");
							getDepartments();
						},
						error : function() {
							alert("删除失败");
						}
					});
		}
	</script>


	<body>
		<!--导航-->
		<nav class="navbar navbar-default navbar-static-top">
			<!--导航顶栏-->
			<div class="navbar-header" id="my_navbar_heigth">
				<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#my_navbar-sidefuncation">
    				<span class="sr-only"></span>
    				<span class="icon-bar"></span>
    				<span class="icon-bar"></span>
    				<span class="icon-bar"></span>
    			</button>

				<div>
					<img id="my_icon" src="img/logo2.png" alt="我们的图标" />
				</div>

			</div>

			<h1 id="my_title">签到网站后台管理</h1>

			<ul class="nav navbar-nav navbar-right" id="my_navbar-cancellation">
				<li>
					<a href="#">我的消息<span class="badge" style="background:#C12E2A ;">20</span></a>
				</li>
				<li>
					<a href="login.html"><span class="glyphicon glyphicon-off"></span>&nbsp;注销</a>
				</li>
			</ul>

			<!--侧边功能栏-->
			<div class="navbar-default navbar-collapse" id="my_navbar-sidefuncation">
				<ul class="nav">
					<!--搜索-->
					<li>
						<div class="input-group" id="mysearch">
							<input type="text" class="form-control" placeholder="请输入要搜索的内容" />
							<span class="input-group-btn">
	    						<button type="button" class="btn btn-default">
	    							<span class="glyphicon glyphicon-search"></span>
							</button>
							</span>
						</div>
					</li>

					<!--此为公司负责人时才显示-->
					
	 <!--还未实现公司负责人不能修改员工列表的信息，只读-->
					 
					<!--<li>
						
							<a href="#sub6" data-toggle="collapse"><b>部门管理</b><span class="glyphicon glyphicon-chevron-down pull-right"></span></a>
							<ul id="sub6" class="nav collapse">
								<li>
									<a href="#breadcrumb_departmentlist"><span class="glyphicon glyphicon-list"></span>&nbsp;部门列表</a>
								</li>
								<li>
									<a href="#"><span class="glyphicon glyphicon-align-left"></span>&nbsp;部门总体出勤情况</a>
								</li>
	
							</ul>
						
					</li>-->
					
					
					<li>
						<a href="#sub1" data-toggle="collapse"><b>部门管理</b><span class="glyphicon glyphicon-chevron-down pull-right"></span></a>
						<ul id="sub1" class="nav collapse">
							<li>
								<a href="#breadcrumb_employeeslist"><span class="glyphicon glyphicon-list"></span>&nbsp;部门列表</a>
							</li>

						</ul>
					</li>
					<li>
						<a href="#sub2" data-toggle="collapse"><b>通知信息</b><span class="glyphicon glyphicon-chevron-down pull-right"></span></a>
						<ul id="sub2" class="nav collapse">
							<li>
								<a href="#"><span class="glyphicon glyphicon-info-sign"></span>&nbsp;发布通知信息（暂无界面）</a>
							</li>
							<li>
								<a href="#"><span class="glyphicon glyphicon-list-alt"></span>&nbsp;查看通知信息</a>
							</li>
						</ul>
					</li>
					<li>
						<a href="#sub3" data-toggle="collapse"><b>活动/会议</b><span class="glyphicon glyphicon-chevron-down pull-right"></span></a>
						<ul id="sub3" class="nav collapse">
							<li>
								<a href="#"><span class="glyphicon glyphicon-info-sign"></span>&nbsp;发布活动/会议（暂无界面）</a>
							</li>
							<li>
								<a href="#"><span class="glyphicon glyphicon-list-alt"></span>&nbsp;查看活动/会议</a>
							</li>
						</ul>
					</li>
					
					<li>
						<a href="#sub4" data-toggle="collapse"><b>账户设置</b><span class="glyphicon glyphicon-chevron-down pull-right"></span></a>
						<ul id="sub4" class="nav collapse">
							<li>
								<a href="#"><span class="glyphicon glyphicon-cog"></span>&nbsp;密码修改（暂无界面）</a>
							</li>
							<li>
								<a href="#"><span class="glyphicon glyphicon-phone"></span>&nbsp;手机号/邮箱号绑定（暂无界面）</a>
							</li>
						</ul>
					</li>
				</ul>
			</div>
		</nav>
		
		<!--此为公司负责人时才显示-->
		<!--部门管理->部门列表界面-->
			<div class="mypage_main">
			<!--部门列表面包屑导航-->
			<ol class="breadcrumb my_breadcrumb">
				<li>
					<a href="#">部门管理</a>
				</li>
				<li class="active">部门列表</li>
			</ol>

			<div class="row">
				<div class="col-sm-12">
					<div class="panel panel-default">
						<div class="panel-heading">
							<ul class="my_headerbuttonlist">
								<li>
									<a onclick="showAddDepartment()"><img src="img/add.png" alt="添加">&nbsp;<span>添加</span></a>
								</li>
								<li>
									<a onclick="showUpdateDepartment()"><img src="img/reverse.png" alt="修改">&nbsp;<span>修改</span></a>
								</li>
								<li>
									<a onclick="getAndDeleteDepartment()"><img src="img/remove.png" alt="删除">&nbsp;<span>删除</span></a>
								</li>
								<li>
									<a onclick="uploadExcel()">
										<img src="img/inport_excel.png" alt="导入">&nbsp;<span>导入Excel</span>
									</a>
								</li>
								<li>
									<div class="my_searchname navbar-right">
										<input type="text" placeholder="请输入要查找的部门名称" />
										<a href="#"><img src="img/search_button.png" alt="搜索"></a>
									</div>
									
								</li>
							</ul>
						</div>
						<div class="panel-body">
							<table class="table table-striped table-hover table-bordered">
								<thead>
									<tr>
										<!--调用全选js函数-->
										<th><input type="checkbox" id="my_departmentlist_checkbox_selectall" onclick="departmentlist_select_all()"/></th>
										<th>部门名称</th>
										<th>部门地址</th>
										<th>Mac</th>
									</tr>
								</thead>

								<tbody id="departments">

								</tbody>
							</table>
							<!--分页-->
							<div id="Pagination1" class="pagination">
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		
		


		
		<!--发布通知->待通知信息界面-->
			<div class="mypage_main" >
			<!--待通知信息面包屑导航-->
			<ol class="breadcrumb my_breadcrumb">
				<li>
					<a href="#">发布通知</a>
				</li>
				<li class="active">待通知信息</li>
			</ol>

			<div class="row">
				<div class="col-sm-12">
					<div class="panel panel-default">
						<div class="panel-heading">
							<ul class="my_headerbuttonlist">
								<li>
									<!--跳转到模态框，模态框定义放在最下面-->
									<a href="#"><img src="img/document_letter_edit.png" alt="发布通知">&nbsp;<span data-toggle="modal" data-target="#myModal" onclick="showDepartments(1)">发布通知</span></a>

								</li>
								<!--<li>-->
									<!--<a href="#"><img src="img/document_letter_okay.png" alt="显示已读通知">&nbsp;<span>显示已读通知</span></a>-->
								<!--</li>-->
								<!--<li>-->
									<!--<a href="#"><img src="img/document_letter_new.png" alt="显示未读通知">&nbsp;<span>显示未读通知</span></a>-->
								<!--</li>-->
								<!--<li>-->
									<!--<a href="#">-->
										<!--<img src="img/export_excel.png" alt="导出Excel">&nbsp;<span>导出Excel</span>-->
									<!--</a>-->
								<!--</li>-->
								<li>
									<div class="my_searchname navbar-right">
										<input type="text" placeholder="请输入要查找的通知信息" />
										<a href="#"><img src="img/search_button.png" alt="搜索"></a>
									</div>

								</li>
							</ul>
						</div>
						<div class="panel-body">
							<table class="table table-striped table-hover table-bordered">
								<thead>
									<tr>
										<!--调用全选js函数-->
										<th><input type="checkbox" id="my_prepare_notify_checkbox_selectall" onclick="prepare_notify_select_all()"/></th>
										<th>通知主题</th>
										<th>通知单位</th>
										<th>通知时间</th>
									</tr>
								</thead>

								<tbody id="notifies">

								</tbody>
							</table>
							<!--分页-->
							<div id="Pagination2" class="pagination">
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>


		<!--查看活动/会议-->

		<div class="mypage_main" >
			<!--员工出勤情况记录表面包屑导航-->
			<ol class="breadcrumb my_breadcrumb">
				<li>
					<a href="#">活动/会议</a>
				</li>
				<li class="active">查看活动/会议</li>
			</ol>

		<div class="row">
			<div class="col-sm-12">
				<div class="panel panel-default">
					<div class="panel-heading">
						<ul class="my_headerbuttonlist">
							<li>
								<!--跳转到模态框，模态框定义放在最下面-->
								<a href="#"><img src="img/document_letter_edit.png" alt="添加活动/会议">&nbsp;<span data-toggle="modal" data-target="#myModalActivity" onclick="showDepartments(2)">添加活动/会议</span></a>

							</li>
							<!--<li>-->
								<!--<a href="#"><img src="img/document_letter_okay.png" alt="显示已读信息">&nbsp;<span>显示已读信息</span></a>-->
							<!--</li>-->
							<!--<li>-->
								<!--<a href="#"><img src="img/document_letter_new.png" alt="显示未读信息">&nbsp;<span>显示未读信息</span></a>-->
							<!--</li>-->
							<!--<li>-->
								<!--<a href="#">-->
									<!--<img src="img/export_excel.png" alt="导出Excel">&nbsp;<span>导出Excel</span>-->
								<!--</a>-->
							<!--</li>-->
							<li>
								<div class="my_searchname navbar-right">
									<input type="text" placeholder="请输入要查找的活动/会议" />
									<a href="#"><img src="img/search_button.png" alt="搜索"></a>
								</div>

							</li>
						</ul>
					</div>
					<div class="panel-body">
						<table class="table table-striped table-hover table-bordered">
							<thead>
							<tr>
								<!--调用全选js函数-->
								<th><input type="checkbox" id="my_attend_checkbox_selectall" onclick="attend_select_all()"/></th>
								<th>主题</th>
								<th>开始时间</th>
								<th>结束时间</th>
								<th>地点</th>
							</tr>
							</thead>

							<tbody id="activities">

							</tbody>
						</table>
						<div id="Pagination3" class="pagination">
						</div>
					</div>
				</div>
			</div>
		</div>
		</div>


		<!--发布通知模态框-->
		<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"  data-backdrop="static"  data-keyboard="false">
			<!--data-backdrop="static"指定一个静态的背景，当用户点击模态框外部时不会关闭模态框-->
			<!--data-keyboard是指当按下ESC键时关闭模态框，设置为 false 时则按键无效-->

			<div class="modal-dialog" role="document">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
						<h4 class="modal-title" id="myModalLabel">发布通知</h4>
					</div>
					<div class="modal-body">
						<div id="modal_input">
							<form>
								<div  class="form-group">
									<span>通知主题</span>
									<input id="tip_input" type="text"/>
								</div>
								<div  class="form-group">
									<div><span id="reason_input_tip">通知内容</span></div>
									<textarea id="reason_input" placeholder=""></textarea>
								</div>
								<!--<div  class="form-group">-->
									<!--<span>发布</span>-->
									<!--<input id="person_input" type="text"/>-->
								<!--</div>-->
							</form>
						</div>
						<div class="my_searchname navbar-right">
							<input type="text" placeholder="输入部门名称搜索">
							<a href="#"><img src="img/search_button.png" alt="搜索部门"></a>
						</div>
						<br />
						<br />

						<!--<div id="notifySelectNotifyPerson" class="btn-group navbar-right">-->
							<!--<button id="NotifyDepartment" class="btn" onclick="notifyDepartment();">通知公司</button>-->
							<!--<button id="NotifyEmployees" class="btn" onclick="notifyEmployees();">通知部门</button>-->
						<!--</div>-->

						<div id="my_addtable_department" class="pull-right" style="width: 35%;overflow-y: scroll;height: 270px;float: right;">
							<table class="table">
								<thead>
								<tr>
									<th>部门</th>
									<th>
										<input  type="checkbox" id="addDepartment_checkbox_selectall1" onclick="addDepartment_checkbox_selectall(1)"/>
									</th>
								</tr>
								<tr id="Department1">
								<!--模态框内容-->
								</tr>
                                </thead>
							</table>
						</div>


					</div>
					<div class="modal-footer" style="margin-top: 300px">
						<button type="button" class="btn btn-default" data-dismiss="modal">取消关闭</button>
						<button type="button" class="btn btn-primary" onclick="sendNotify()">确认发布</button>
					</div>
				</div>
			</div>
		</div>


		<!--新增活动/会议的模态框-->
		<div class="modal fade" id="myModalActivity" tabindex="-1" role="dialog" aria-labelledby="myModalActivityLabel"  data-backdrop="static"  data-keyboard="false">
			<!--data-backdrop="static"指定一个静态的背景，当用户点击模态框外部时不会关闭模态框-->
			<!--data-keyboard是指当按下ESC键时关闭模态框，设置为 false 时则按键无效-->

			<div class="modal-dialog" role="document">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
						<h4 class="modal-title" id="myModalActivityLabel">新增活动/会议</h4>
					</div>
					<div class="modal-body">
						<div id="modalActivity_input">
							<form>
								<div  class="form-group">
									<span>活动主题</span>
									<input id="Activity_tip_input" type="text"/>
								</div>
								<div  class="form-group">
									<span>活动地点</span>
									<input id="Activity_address" type="text"/>
								</div>
								<div  class="form-group">
									<div><span id="reasonActivity_input_tip">活动内容</span></div>
									<textarea id="reasonActivity_input" placeholder=""></textarea>
								</div>
								<div  class="form-group">
									<span>起始时间</span>
									<input type="datetime-local" id="ActivityStartTime"/>
								</div>
								<div  class="form-group">
									<span>截止时间</span>
									<input type="datetime-local" id="ActivityEndTime"/>
								</div>
							</form>
						</div>
						<div class="my_searchname navbar-right">
							<input type="text" placeholder="输入部门名称搜索">
							<a href="#"><img src="img/search_button.png" alt="搜索部门"></a>
						</div>
						<br />
						<br />


						<div id="tableAct" class="pull-right"  style="width: 35%;overflow-y: scroll;height: 270px;float: right;">
							<table class="table">
								<thead>
								<tr>
									<th>部门</th>
									<th>
										<input  type="checkbox" id="addDepartment_checkbox_selectall2" onclick="addDepartment_checkbox_selectall(2)"/>
									</th>
								</tr>
								<tr id="Department2">
									<!--模态框内容-->
								</tr>
								</thead>
							</table>
						</div>

					</div>
					<div class="modal-footer" style="margin-top: 300px">
						<button type="button" class="btn btn-default" data-dismiss="modal">取消关闭</button>
						<button type="button" class="btn btn-primary" onclick="sendActivity()">确认新增</button>
					</div>
				</div>
			</div>
		</div>
		<div class="modal" id="themodal2"  tabindex="-1">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-body">
						<form  method="post"  class="myform" action="CompanyAdmin/uploadExcel"  enctype="multipart/form-data">
							<p class="row">
								<label for="excel">Excel:</label>
								<input type="file" name="file" id="excel">
							</p>
							<input id="companyid" name="companyid"  value="1"type="text" hidden>
							<input type="submit" class="submit" value="提交"/>
						</form>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
					</div>
				</div><!-- /.modal-content -->
			</div><!-- /.modal-dialog -->
		</div><!-- /.modal -->
		<div class="modal" id="themodal3"  tabindex="-1">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
						<h4 class="modal-title modalTitle" id="departmentName">部门1</h4>
					</div>
					<div class="modal-body">
						<div  class="panel-body">
							<table class="table table-striped table-hover table-bordered">
								<thead>
								<tr>
									<!--调用全选js函数-->
									<th>姓名</th>
									<th>账户名</th>
									<th>职位</th>
									<th>性别</th>
									<th>联系电话</th>
									<th>邮箱号码</th>
								</tr>
								</thead>

								<tbody id="departmentAdmins">
								<tr>
									<td>1213123</td>
									<td>Hello</td>
									<td>张三</td>
									<td>男</td>
									<td>13428003404</td>
									<td>13428003404@139.com</td>
								</tr>
								</tbody>
							</table>
							<!--分页-->

							<div id="departmentAdminPagination" class="pagination">
							</div>

						</div>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
					</div>
				</div><!-- /.modal-content -->
			</div><!-- /.modal-dialog -->
		</div>
		<div class="modal" id="themodal4"  tabindex="-1">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-body">
						<form  method="post" class="myform">
							<p class="row row1">
								<label for="departmentName1">部门:</label>
								<input type="text" name="departmentName1" id="departmentName1" required>
							</p>
							<p class="row row1">
								<label for="address">地址:</label>
								<input type="text" name="address" id="address" required>
							</p>
							<p class="row row1">
								<label for="mac">Mac:</label>
								<input type="text" name="mac" id="mac" required>
							</p>
						</form>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-default" onclick="addDepartment()">提交</button>
						<button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
					</div>
				</div><!-- /.modal-content -->
			</div><!-- /.modal-dialog -->
		</div>
		<div class="modal" id="themodal5"  tabindex="-1">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-body">
						<form  method="post" class="myform">
							<p class="row row1">
								<label for="departmentName2">部门:</label>
								<input type="text" name="departmentName2" id="departmentName2" required>
							</p>
							<p class="row row1">
								<label for="address1">地址:</label>
								<input type="text" name="address1" id="address1" required>
							</p>
							<p class="row row1">
								<label for="mac1">Mac:</label>
								<input type="text" name="mac1" id="mac1" required>
							</p>
						</form>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-default" onclick="updateDepartment()">提交</button>
						<button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
					</div>
				</div><!-- /.modal-content -->
			</div><!-- /.modal-dialog -->
		</div>
		<div class="modal" id="themodal6"  tabindex="-1">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
						<h4 class="modal-title modalTitle" id="title">模态弹出窗标题</h4>
					</div>
					<div class="modal-body">
						<p id="content" class="modalContent">内容</p>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-default" onclick="checkApplication()">通过</button>
						<button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
					</div>
				</div><!-- /.modal-content -->
			</div><!-- /.modal-dialog -->
		</div>
        <!--自己定义的js-->
        <script type="text/javascript">
        //获取cookie
        var cookie=1;

        function getCookie(cname){
        var name = cname + "=";
        var ca = document.cookie.split(';');
        for(var i=0; i<ca.length; i++) {
        var c = ca[i].trim();
        if (c.indexOf(name)==0) return c.substring(name.length,c.length);
        }
        return "";
        }
        //查cookie
        function checkCookie(){
        cookie=getCookie("CompanyRepresentativeId");
        if (cookie){
        alert("test "+cookie);
        }
        else {
        alert("null");
        // window.open('Home.html','_self','width=200,height=100,,_left=0,_top=100');
        }
        }
		function uploadExcel()
		{
			$("#companyid").val(companyId);
			$("#themodal2").modal();

		}


			function departmentlist_select_all(){
				for(var i=1;i<=1000;i++)
				{
				   var cbox_id="my_departmentlist_checkbox_"+i;
				   var cbox=document.getElementById(cbox_id);
				   //alert(cbox.value);
				   if(document.getElementById("my_departmentlist_checkbox_selectall").checked)
				   cbox.checked=true;
				   else
				   cbox.checked=false;;
				}
			}

//			公司负责人才显示
//			部门总体出勤情况界面
			function departmentAttendlist_select_all(){
				for(var i=1;i<=1000;i++)
				{
				   var cbox_id="my_departmentAttendlist_checkbox_"+i;
				   var cbox=document.getElementById(cbox_id);
				   //alert(cbox.value);
				   if(document.getElementById("my_departmentAttendlist_checkbox_selectall").checked)
				   cbox.checked=true;
				   else
				   cbox.checked=false;;
				}
			}
//
////			员工列表界面
//			function employeeslist_select_all(){
//				for(var i=1;i<=8;i++)
//				{
//				   var cbox_id="my_employeeslist_checkbox_"+i;
//				   var cbox=document.getElementById(cbox_id);
//				   //alert(cbox.value);
//				   if(document.getElementById("my_employeeslist_checkbox_selectall").checked)
//				   cbox.checked=true;
//				   else
//				   cbox.checked=false;;
//				}
//			}
//
////			出差登记/查询界面
//			function business_trip_select_all(){
//				for(var i=1;i<=8;i++)
//				{
//				   var cbox_id="my_business_trip_checkbox_"+i;
//				   var cbox=document.getElementById(cbox_id);
//				   //alert(cbox.value);
//				   if(document.getElementById("my_business_trip_checkbox_selectall").checked)
//				   cbox.checked=true;
//				   else
//				   cbox.checked=false;;
//				}
//			}
//
////			待通知信息界面
			function prepare_notify_select_all(){
				for(var i=1;i<=1000;i++)
				{
				   var cbox_id="my_prepare_notify_checkbox_"+i;
				   var cbox=document.getElementById(cbox_id);
				   //alert(cbox.value);
				   if(document.getElementById("my_prepare_notify_checkbox_selectall").checked)
				   cbox.checked=true;
				   else
				   cbox.checked=false;;
				}
			}
//
////			历史通知信息界面
//			function history_notify_select_all(){
//				for(var i=1;i<=8;i++)
//				{
//				   var cbox_id="my_history_notify_checkbox_"+i;
//				   var cbox=document.getElementById(cbox_id);
//				   //alert(cbox.value);
//				   if(document.getElementById("my_history_notify_checkbox_selectall").checked)
//				   cbox.checked=true;
//				   else
//				   cbox.checked=false;;
//				}
//			}
//
////			待审核信息界面
//			function prepare_review_select_all(){
//				for(var i=1;i<=8;i++)
//				{
//				   var cbox_id="my_prepare_review_checkbox_"+i;
//				   var cbox=document.getElementById(cbox_id);
//				   //alert(cbox.value);
//				   if(document.getElementById("my_prepare_review_checkbox_selectall").checked)
//				   cbox.checked=true;
//				   else
//				   cbox.checked=false;;
//				}
//			}
//
////			历史审核信息界面
//			function history_review_select_all(){
//				for(var i=1;i<=8;i++)
//				{
//				   var cbox_id="my_history_review_checkbox_"+i;
//				   var cbox=document.getElementById(cbox_id);
//				   //alert(cbox.value);
//				   if(document.getElementById("my_history_review_checkbox_selectall").checked)
//				   cbox.checked=true;
//				   else
//				   cbox.checked=false;;
//				}
//			}
//
////			员工出勤情况记录表界面
			function attend_select_all(){
				for(var i=1;i<=1000;i++)
				{
				   var cbox_id="my_attend_checkbox_"+i;
				   var cbox=document.getElementById(cbox_id);
				   //alert(cbox.value);
				   if(document.getElementById("my_attend_checkbox_selectall").checked)
				   cbox.checked=true;
				   else
				   cbox.checked=false;;
				}
			}
		</script>



        <!--模态框-->
        <script type="text/javascript">
//			var departmentNumList=new Array();//存放不同公司含有的部门数
			//第一位置零，列表中第一个即下标为零的公司的部门数量是存放在[j+1]下标的
//			departmentNumList[0]=0;
//			var companyCheckBoxNum=new Array();
			var departmentCheckBoxNum=new Array();
			var departmentId=new Array();
			var departmentChecked=new Array();
			var employeeId=new Array();
			var adscription=null;//公司管理员所属的公司名称
			var DepartmentNum=null;

 			function addDepartment_checkbox_selectall(j){
//				alert("company"+j);
                for(var i=0;i<DepartmentNum;i++)
                {
                    var cbox_id=j+"addDepartment_checkbox_"+i;
                    var cbox=document.getElementById(cbox_id);
//                    alert(cbox.checked);
                    if(document.getElementById("addDepartment_checkbox_selectall"+j).checked)
                        cbox.checked=true;
                    else
                        cbox.checked=false;
                }
            }

			//对应第j个部门 第k个模态框
			function departmentsChecked(j,k){
//				departmentChecked[j]=true;
				var cbox_id=k+"addDepartment_checkbox_"+j;
				alert(cbox_id);
				if(document.getElementById(cbox_id).checked)departmentChecked[j]=true;
				else departmentChecked[j]=false;
				alert(departmentChecked[j]+"  departmentChecked");
			}
//            function addDepartment_checkbox_selectall(j) {
////				alert("depart");
////				alert(DepartmentNum);
//				if (departmentNumList[j+1] != null)
//					if (document.getElementById("addCompany_checkbox_" + j).checked)
//						for (var i = 0; i < departmentNumList[j+1]; i++) {
//							var cbox_id = j + "addDepartment_checkbox_" + i;
//							alert(cbox_id);
//							var cbox = document.getElementById(cbox_id);
//							if (document.getElementById(j + "addDepartment_checkbox_" + i).checked) {
////						alert(i);
////						cbox.checked = false;
//							}
//							else
//								cbox.checked = true;
//						}
//					else {
//						for (var i = 0; i < departmentNumList[j+1]; i++) {
//							var cbox_id = j + "addDepartment_checkbox_" + i;
//							alert(cbox_id);
//							var cbox = document.getElementById(cbox_id);
//							if (document.getElementById(j + "addDepartment_checkbox_" + i).checked) {
//								cbox.checked = false;
//							}
//						}
//					}
//			}
//            }function addDepartment_checkbox_selectall(j){
////				alert("depart");
////				alert(DepartmentNum);
//                if(departmentNumList[j+1]!=null)
//				if(document.getElementById("addCompany_checkbox_"+j).checked)
//                for(var i=0;i<departmentNumList[j+1];i++)
//                {
//                    var cbox_id=j+"addDepartment_checkbox_"+i;
//					alert(cbox_id);
//                    var cbox=document.getElementById(cbox_id);
//                    if(cbox.checked) {
////						alert(i);
////						cbox.checked = false;
//					}
//                    else
//                        cbox.checked=true;
//                }
//				else{
//					var cbox_id=j+"addDepartment_checkbox_"+i;
//					alert(cbox_id);
//					var cbox=document.getElementById(cbox_id);
//					if(cbox.checked) {
//						cbox.checked = false;
//					}
//				}
//
//            }
//            function add_checkbox_selectall_notify(){
//                for(var i=1;i<=6;i++)
//                {
//                    var cbox_id="add_checkbox_notify_"+i;
//                    var cbox=document.getElementById(cbox_id);
//                    //alert(cbox.value);
//                    if(document.getElementById("add_checkbox_selectall_notify").checked)
//                        cbox.checked=true;
//                    else
//                        cbox.checked=false;;
//                }
//            }
//            function add_checkbox_selectall_activity(){
//                for(var i=1;i<=6;i++)
//                {
//                    var cbox_id="add_checkbox_activity_"+i;
//                    var cbox=document.getElementById(cbox_id);
//                    //alert(cbox.value);
//                    if(document.getElementById("add_checkbox_selectall_activity").checked)
//                        cbox.checked=true;
//                    else
//                        cbox.checked=false;;
//                }
//            }

            //发布通知，加载公司列表
            function showDepartments(i) {//第i个模态框
				$.ajax({
					type: 'post',
					url: "AdminAccountManagement/selectCompany",
					data: 'companyrepresentativeid=' + cookie,
					success: function (data) {
//						alert(i+" test i");
//						alert(data[0].companyid);
						showDepartment(data[0].companyid,i);
						adscription=data[0].name;
					},
					error: function () {
						alert("test  false");
						return;
					}
				})
			}
			function showContent(title,content)
			{
				$("#title").text(title);
				$("#content").text(content);
				$("#themodal6").modal();
			}
			function showDepartment(Companyid,j){//第j个模态框
                $.ajax({
                    type: 'post',
                    url: "AdminAccountManagement/selectDepartment",
                    data: 'companyid=' + Companyid,
                    success: function (data) {
                        alert("test success");
                        var length = data.length;
                        DepartmentNum=length;
						$("#Department"+j).html("");
                        for(var i=0;i<length;i++) {
                            $("#Department"+j)
                                    .append(
									 '<li style="list-style-type: none;padding-left: 8%;" >'
									+'<a href="#subModel'+i+'" data-toggle="collapse"><b>'+data[i].name +'</b></a><input check style="float: right" type="checkbox" id="'+j+'addDepartment_checkbox_'+i+'" onclick="departmentsChecked('+i+','+j+')"/><p></p>'
									+'</li>'
                                    );
							departmentId[i]=data[i].departmentid;
//							alert(departmentId[i]);
                        }
                    },
                    error: function () {
                        alert("test  false");
                        return;
                    }
                });
            }
<!---------------------------------- 发布通知  ----------------------------->
	function sendNotify() {
		var notifyTip = document.getElementById("tip_input").value;
		var notufyContent = document.getElementById("reason_input").value;
		$.ajax({
			type: 'post',
			url: "AdminAccountManagement/addNotify",
			data: 'content=' + notufyContent + '&title=' + notifyTip
			+ '&adscription=' + adscription,
			//'&departmentids=' + departmentId +
			success: function (data) {
				alert(data["status"]);
				getDepartmentEmployeeId();
			},
			error: function () {
				alert("test  false");
			}
		})
	}

	function getDepartmentEmployeeId (){
//		alert("test getDEid");
		$.ajax({
			type: 'post',
			url: "AdminAccountManagement/getDepartmentEmployeeId",
			data: 'departmentids=' + departmentId,
			success: function (data) {
				var length = data.length;
				for(var i=0;i<length;i++){
					employeeId[i]=data[i].employeeid
//					alert(employeeId[i]+" EID");
				}
				addEmployeeNotify();
			},
			error: function () {
				alert("test  false");
			}
		})
	}

	function addEmployeeNotify(){
		//如果部门是全选的
		if(document.getElementById("addDepartment_checkbox_selectall1").checked){
			$.ajax({
				type: 'post',
				url: "AdminAccountManagement/addEmployeeNotify",
				data: 'employeeIds=' + employeeId,
				//'&departmentids=' + departmentId +
				success: function (data) {
					alert(data["status"]);
					window.location.reload();
				},
				error: function () {
					alert("test  false");
				}
			})
		}
		else{
			var checkedList=new Array();
			var j=0;
			for(var i=0;i<DepartmentNum;i++){
				if(departmentChecked[i])checkedList[j++]=employeeId[i];
			}
			$.ajax({
				type: 'post',
				url: "AdminAccountManagement/addEmployeeNotify",
				data: 'employeeIds=' + checkedList,
				success: function (data) {
					alert(data["status"]);
					window.location.reload();
				},
				error: function () {
					alert("test  false");
				}
			})
		}
	}
<!--------------------------------------- 发布通知 ----------------------------------------->


<!-------------------------------------- 新增活动/会议 -------------------------------------->
	function sendActivity(){
		var activityTip = document.getElementById("Activity_tip_input").value;
		var activityContent = document.getElementById("reasonActivity_input").value;
		var startTime = document.getElementById("ActivityStartTime").value;
		var endTime = document.getElementById("ActivityEndTime").value;
		var address = document.getElementById("Activity_address").value;
//		if(activityTip==null||activityContent==null||startTime==null||endTime==null||address==null) {
//				alert("不能为空");return;
//		}
//		else
//			{
				alert("test sendActivity");

			$.ajax({
				type: 'post',
				url: "AdminAccountManagement/addActivity",
				data: 'activityname=' + activityTip + '&content=' + activityContent + '&address=' + address  + '&employeeid=' + '1',//暂时写静态
//				+ '&starttime=' + startTime + '&endtime=' + endTime ,
				//'&departmentids=' + departmentId +
				success: function (data) {
					alert(data["status"]);
					if(data["status"]==true)window.location.reload();
				},
				error: function () {
					alert("test  false");
				}
			})
//		}
	}

<!-------------------------------------- 新增活动/会议 -------------------------------------->

        </script>


		<script src="js/jquery-3.1.1.min.js"></script>
		<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
		<script src="https://cdn.bootcss.com/jquery/1.12.4/jquery.min.js"></script>
		<!-- Include all compiled plugins (below), or include individual files as needed -->
		<script src="js/bootstrap.min.js"></script>
		<script type="text/javascript" src="js/jquery.pagination.js"></script>
	<script>
		setCookie();
		judge();
		function showAddDepartment()
		{
			$("#themodal4").modal();
		}
		function addDepartment()
		{
			var name=$("#departmentName1").val();
			var address=$("#address").val();
			var mac=$("#mac").val();
			$.ajax({
				type : 'post',
				url : "CompanyAdmin/addDepartment",
				data: 'name='+name+'&address='+address+'&mac='+mac+'&companyid='+companyId,
				success : function(data) {
					if(data=="")
						alert("添加失败");
					else
						alert("添加成功");
					getDepartments();
				},
				error : function() {
					alert("添加失败");
					getDepartments();
				}

			});
		}
		function showUpdateDepartment()
		{
			$("#themodal5").modal();
		}
		function updateDepartment()
		{
			var name=$("#departmentName2").val();
			var address=$("#address1").val();
			var mac=$("#mac1").val();
			var departmentids=new Array();
			var sign=0;
			$("#departments input:checked").each(function(i,element)
			{
				departmentids[i]=$(element).attr("class");
				sign++;
			});
			if(sign!=0)
			$.ajax({
				type : 'post',
				url : "CompanyAdmin/updateDepartment",
				data: 'name='+name+'&address='+address+'&mac='+mac+'&companyid='+companyId+'&departmentids='+departmentids,
				success : function(data) {
					if(data=="")
						alert("更改失败");
					else
						alert("更改成功");
					getDepartments();
				},
				error : function() {
					alert("添加失败");
					getDepartments();
				}

			});
			else
			{
				alert("请选择要修改的部门");
			}
		}

		function showDepartmentAdmin(departmentid,name)
		{
			$("#departmentName").text(name);
			getDepartmentAdmin(departmentid);
		}
		function getDepartmentAdmin(departmentid) {

			$
					.ajax({
						type : 'post',
						url : "CompanyAdmin/getDepartmentAdmin",
						data: 'departmentid='+departmentid,
						success : function(data) {
							$(function() {

								var length = data.length;
								$("#departmentAdminPagination").pagination(length, {
									items_per_page : 5,
									callback : pageselectCallback
								});

								function pageselectCallback(page_index, jq) {
									var items_per_page = 5;
									var max_elem = Math.min((page_index + 1)
											* items_per_page, length);

									$("#departmentAdmins").html("");//html() 方法返回或设置被选元素的内容 (inner HTML)。
									for (var i = page_index * items_per_page; i < max_elem; i++) {
										var s=i+1;
										var sex="";
										if(data[i].sex==true)
											sex='男';
										else
											sex="女";
										$("#departmentAdmins")
												.append(
												'<tr><td>'
												+ data[i].name
												+ '</td><td>'
												+ data[i].account
												+ '</td><td>'
												+ data[i].duties
												+ '</td><td>'
												+ sex
												+ '</td><td>'
												+ data[i].telephone
												+ '</td><td>'
												+ data[i].email
												+ '</td></tr>');

									}
									$("#themodal3").modal();
								}
							});
							$("#themodal3").modal();
						},
						error : function() {
							$("#themodal3").modal();
						}
					});
		}
		function queryActivities() {

			$
					.ajax({
						type : 'post',
						url : "CompanyAdmin/queryActivities",
						data: 'companyrepresentativeid='+companyRepresentativeId,
						success : function(data) {
							$(function() {

								var length = data.length;
								$("#Pagination2").pagination(length, {
									items_per_page : 10,
									callback : pageselectCallback
								});

								function pageselectCallback(page_index, jq) {
									var items_per_page = 10;
									var max_elem = Math.min((page_index + 1)
											* items_per_page, length);

									$("#activities").html("");//html() 方法返回或设置被选元素的内容 (inner HTML)。
									for (var i = page_index * items_per_page; i < max_elem; i++) {
										var s=i+1;
										$("#activities")
												.append(
												'<tr><td><input type="checkbox" id="my_business_trip_checkbox_'+s+'"/></td><td><a onclick=showContent("'+data[i].activityname+'","'+data[i].activityname+'")>'
												+ data[i].activityname
												+ '</a></td><td>'
												+ (new Date(data[i].starttime)).toLocaleString()
												+ '</td><td>'
												+ (new Date(data[i].endtime)).toLocaleString()
												+ '</td><td>'
												+ data[i].address
												+ '</td></tr>');

									}
									return false;
								}
							});
						},
						error : function() {
							return;
						}
					});
		}
		function queryNotifies() {

			$
					.ajax({
						type : 'post',
						url : "CompanyAdmin/queryNotifies",
						data: 'companyrepresentativeid='+companyRepresentativeId,
						success : function(data) {
							$(function() {

								var length = data.length;
								$("#Pagination3").pagination(length, {
									items_per_page : 10,
									callback : pageselectCallback
								});

								function pageselectCallback(page_index, jq) {
									var items_per_page = 10;
									var max_elem = Math.min((page_index + 1)
											* items_per_page, length);

									$("#notifies").html("");//html() 方法返回或设置被选元素的内容 (inner HTML)。
									for (var i = page_index * items_per_page; i < max_elem; i++) {
										var s=i+1;
										$("#notifies")
												.append(
												'<tr><td><input type="checkbox"  id="my_prepare_notify_checkbox_'+s+'"/></td><td><a onclick=showContent("'+data[i].title+'","'+data[i].content+'")>'
												+ data[i].title
												+ '</a></td><td>'
												+ data[i].adscription
												+ '</td><td>'
												+ (new Date(data[i].notifytime)).toLocaleString()
												+ '</td></tr>');

									}
									return false;
								}
							});
						},
						error : function() {
							return;
						}
					});
		}
	</script>
	</body>

</html>